name: sava_fe_be_1_2

endpoints:
  sava.ports.port: 80

clusters:

  sava:
    services:
      breed:
        name: sava_frontend_1_2
        deployable: magneticio/sava-1.2_frontend:0.7.0
        ports:
          name: port
          value: 80/http
          direction: OUT

        environment_variables:

          - name: backend1.host
            direction: IN
            alias: BACKEND_1_HOST

          - name: backend1.ports.port
            direction: IN
            alias: BACKEND_1_PORT

          - name: backend2.host
            direction: IN
            alias: BACKEND_2_HOST

          - name: backend2.ports.port
            direction: IN
            alias: BACKEND_2_PORT

        dependencies:
          backend1: sava_backend1_1_2
          backend2: sava_backend2_1_2

  backend1:
    services:
      breed:
        name: sava_backend1_1_2
        deployable: magneticio/sava-1.2_backend:0.7.0
        ports:
          name: port
          value: 80/http
          direction: OUT

  backend2:
    services:
      breed:
        name: sava_backend2_1_2
        deployable: magneticio/sava-1.2_backend:0.7.0
        ports:
          name: port
          value: 80/http
          direction: OUT
